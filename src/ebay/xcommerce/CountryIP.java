package ebay.xcommerce;

import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.IOException;

public class CountryIP
{

@SuppressWarnings("deprecation")
public static String getCountry(String inetaddress) throws IOException
{
String currencyCode=null;
long w,x,y,z;
long ipNumber;
long startIndex,endIndex;
String currentLine=null;
String file=null;

String[] ipunits=inetaddress.split("\\.");//splitting the ip address to get the 4 blocks

w=Long.parseLong(ipunits[0]);//1st block unit
x=Long.parseLong(ipunits[1]);//2nd block unit
y=Long.parseLong(ipunits[2]);//3rd block unit
z=Long.parseLong(ipunits[3]);//4th block unit

ipNumber=(16777216*w)+(65536*x)+(256*y)+z;//calculating the ipnumber

if(ipNumber<=Long.parseLong("3253963775"))
{
	if(ipNumber<=Long.parseLong("1534844927"))
		{
		if(ipNumber<=Long.parseLong("1308037119"))
			{
			if(ipNumber<=Long.parseLong("1048894743"))
				{
				if(ipNumber<=Long.parseLong("1043910399"))
		            {
					if(ipNumber<=Long.parseLong("1039138815"))
						{
						if(ipNumber<=Long.parseLong("540683775"))
							file="file_1.csv";
						else
							file="file_2.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1041727090"))
							file="file_3.csv";
						else
							file="file_4.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("1044930799"))
						{
						if(ipNumber<=Long.parseLong("1044031127"))
							file="file_5.csv";
						else
							file="file_6.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1046543103"))
							file="file_7.csv";
						else
							file="file_8.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("1090495487"))
		            {
					if(ipNumber<=Long.parseLong("1052468223"))
						{
						if(ipNumber<=Long.parseLong("1051578295"))
							file="file_9.csv";
						else
							file="file_10.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1072922623"))
							file="file_11.csv";
						else
							file="file_12.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("1161425407"))
						{
						if(ipNumber<=Long.parseLong("1118989823"))
							file="file_13.csv";
						else
							file="file_14.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1296244991"))
							file="file_15.csv";
						else
							file="file_16.csv";
						}
		            }
					
				}
			}
		else
		{
			if(ipNumber<=Long.parseLong("1389213119"))
				{
				if(ipNumber<=Long.parseLong("1354682175"))
		            {
					if(ipNumber<=Long.parseLong("1336279039"))
						{
						if(ipNumber<=Long.parseLong("1317671247"))
							file="file_17.csv";
						else
							file="file_18.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1347977215"))
							file="file_19.csv";
						else
							file="file_20.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("1361038295"))
						{
						if(ipNumber<=Long.parseLong("1358901935"))
							file="file_21.csv";
						else
							file="file_22.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1372702463"))
							file="file_23.csv";
						else
							file="file_24.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("1433911295"))
		            {
					if(ipNumber<=Long.parseLong("1408454655"))
						{
						if(ipNumber<=Long.parseLong("1403662655"))
							file="file_25.csv";
						else
							file="file_26.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1424619775"))
							file="file_27.csv";
						else
							file="file_28.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("1500217343"))
						{
						if(ipNumber<=Long.parseLong("1475207135"))
							file="file_29.csv";
						else
							file="file_30.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1509467583"))
							file="file_31.csv";
						else
							file="file_32.csv";
						}
		            }
					
				}
			}
		}
	else
	{
		if(ipNumber<=Long.parseLong("2987433279"))
			{
			if(ipNumber<=Long.parseLong("1842118655"))
				{
				if(ipNumber<=Long.parseLong("1546677561"))
		            {
					if(ipNumber<=Long.parseLong("1540285951"))
						{
						if(ipNumber<=Long.parseLong("1539705343"))
							file="file_33.csv";
						else
							file="file_34.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1540677631"))
							file="file_35.csv";
						else
							file="file_36.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("1585299455"))
						{
						if(ipNumber<=Long.parseLong("1572470783"))
							file="file_37.csv";
						else
							file="file_38.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("1603990527"))
							file="file_39.csv";
						else
							file="file_40.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("2226388991"))
		            {
					if(ipNumber<=Long.parseLong("2000633855"))
						{
						if(ipNumber<=Long.parseLong("1914576895"))
							file="file_41.csv";
						else
							file="file_42.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("2070732799"))
							file="file_43.csv";
						else
							file="file_44.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("2613247999"))
						{
						if(ipNumber<=Long.parseLong("2403467263"))
							file="file_45.csv";
						else
							file="file_46.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("2761031679"))
							file="file_47.csv";
						else
							file="file_48.csv";
						}
		            }
					
				}
			}
		else
		{
			if(ipNumber<=Long.parseLong("3229680383"))
				{
				if(ipNumber<=Long.parseLong("3164953087"))
		            {
					if(ipNumber<=Long.parseLong("3000139775"))
						{
						if(ipNumber<=Long.parseLong("2988509415"))
							file="file_49.csv";
						else
							file="file_50.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3081854975"))
							file="file_51.csv";
						else
							file="file_52.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3223228159"))
						{
						if(ipNumber<=Long.parseLong("3187944407"))
							file="file_53.csv";
						else
							file="file_54.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3226576639"))
							file="file_55.csv";
						else
							file="file_56.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("3244155903"))
		            {
					if(ipNumber<=Long.parseLong("3238066431"))
						{
						if(ipNumber<=Long.parseLong("3231720703"))
							file="file_57.csv";
						else
							file="file_58.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3240200191"))
							file="file_59.csv";
						else
							file="file_60.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3249093119"))
						{
						if(ipNumber<=Long.parseLong("3245251071"))
							file="file_61.csv";
						else
							file="file_62.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3251705599"))
							file="file_63.csv";
						else
							file="file_64.csv";
						}
		            }
					
				}
			}
	}
}

else
{
	if(ipNumber<=Long.parseLong("3339673599"))
		{
		if(ipNumber<=Long.parseLong("3274455423"))
			{
			if(ipNumber<=Long.parseLong("3262739231"))
				{
				if(ipNumber<=Long.parseLong("3262473998"))
		            {
					if(ipNumber<=Long.parseLong("3257773847"))
						{
						if(ipNumber<=Long.parseLong("3255745535"))
							file="file_65.csv";
						else
							file="file_66.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3259630335"))
							file="file_67.csv";
						else
							file="file_68.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3262479547"))
						{
						if(ipNumber<=Long.parseLong("3262478259"))
							file="file_69.csv";
						else
							file="file_70.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3262660487"))
							file="file_71.csv";
						else
							file="file_72.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("3264376319"))
		            {
					if(ipNumber<=Long.parseLong("3262844255"))
						{
						if(ipNumber<=Long.parseLong("3262781495"))
							file="file_73.csv";
						else
							file="file_74.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3262885207"))
							file="file_75.csv";
						else
							file="file_76.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3270973951"))
						{
						if(ipNumber<=Long.parseLong("3267507839"))
							file="file_77.csv";
						else
							file="file_78.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3272713983"))
							file="file_79.csv";
						else
							file="file_80.csv";
						}
		            }
					
				}
			}
		else
		{
			if(ipNumber<=Long.parseLong("3278945091"))
				{
				if(ipNumber<=Long.parseLong("3276479167"))
		            {
					if(ipNumber<=Long.parseLong("3276352695"))
						{
						if(ipNumber<=Long.parseLong("3276020111"))
							file="file_81.csv";
						else
							file="file_82.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3276383527"))
							file="file_83.csv";
						else
							file="file_84.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3278940499"))
						{
						if(ipNumber<=Long.parseLong("3277334527"))
							file="file_85.csv";
						else
							file="file_86.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3278943423"))
							file="file_87.csv";
						else
							file="file_88.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("3284133887"))
		            {
					if(ipNumber<=Long.parseLong("3280981135"))
						{
						if(ipNumber<=Long.parseLong("3280929792"))
							file="file_89.csv";
						else
							file="file_90.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3283236895"))
							file="file_91.csv";
						else
							file="file_92.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3286893055"))
						{
						if(ipNumber<=Long.parseLong("3285540207"))
							file="file_93.csv";
						else
							file="file_94.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3323067135"))
							file="file_95.csv";
						else
							file="file_96.csv";
						}
		            }
					
				}
			}
		}
	else
	{
		if(ipNumber<=Long.parseLong("3560945739"))
			{
			if(ipNumber<=Long.parseLong("3420371839"))
				{
				if(ipNumber<=Long.parseLong("3394962431"))
		            {
					if(ipNumber<=Long.parseLong("3360781463"))
						{
						if(ipNumber<=Long.parseLong("3356100607"))
							file="file_97.csv";
						else
							file="file_98.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3391661055"))
							file="file_99.csv";
						else
							file="file_100.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3411564551"))
						{
						if(ipNumber<=Long.parseLong("3400089599"))
							file="file_101.csv";
						else
							file="file_102.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3416864895"))
							file="file_103.csv";
						else
							file="file_104.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("3522121215"))
		            {
					if(ipNumber<=Long.parseLong("3470770175"))
						{
						if(ipNumber<=Long.parseLong("3448546047"))
							file="file_105.csv";
						else
							file="file_106.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3497721855"))
							file="file_107.csv";
						else
							file="file_108.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3560374271"))
						{
						if(ipNumber<=Long.parseLong("3558014975"))
							file="file_109.csv";
						else
							file="file_110.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3560943218"))
							file="file_111.csv";
						else
							file="file_112.csv";
						}
		            }
					
				}
			}
		else
		{
			if(ipNumber<=Long.parseLong("3585750367"))
				{
				if(ipNumber<=Long.parseLong("3571331519"))
		            {
					if(ipNumber<=Long.parseLong("3564880943"))
						{
						if(ipNumber<=Long.parseLong("3562169343"))
							file="file_113.csv";
						else
							file="file_114.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3567399103"))
							file="file_115.csv";
						else
							file="file_116.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3577546367"))
						{
						if(ipNumber<=Long.parseLong("3575635703"))
							file="file_117.csv";
						else
							file="file_118.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3583158527"))
							file="file_119.csv";
						else
							file="file_120.csv";
						}
		            }
					
				}
			else
			{
				if(ipNumber<=Long.parseLong("3642216447"))
		            {
					if(ipNumber<=Long.parseLong("3590317343"))
						{
						if(ipNumber<=Long.parseLong("3588071423"))
							file="file_121.csv";
						else
							file="file_122.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3635879935"))
							file="file_123.csv";
						else
							file="file_124.csv";
						}
		            }
				else
				{
					if(ipNumber<=Long.parseLong("3648181655"))
						{
						if(ipNumber<=Long.parseLong("3645763965"))
							file="file_125.csv";
						else
							file="file_126.csv";
						}
					else
						{
						if(ipNumber<=Long.parseLong("3652128767"))
							file="file_127.csv";
						else
							file="file_128.csv";
						}
		            }
					
				}
			}
	}
}
FileInputStream fis=new FileInputStream(file);//creating file input stream
DataInputStream dis=new DataInputStream(fis);//creating data input stream for the file

while((currentLine=dis.readLine())!=null)
{
String[] values=currentLine.split(",");

startIndex=Long.parseLong(values[0]);
endIndex=Long.parseLong(values[1]);
currencyCode=values[2];

if(startIndex<=ipNumber && ipNumber<=endIndex)
return currencyCode;
}

return null;
}
	
}
